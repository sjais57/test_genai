# api_keys/your_api_key.yaml
id: ak_tiered_model_exec
owner: AI Team
provider_permissions:
  - openai
  - anthropic
  - groq
endpoint_permissions:
  - /v1/chat/completions
  - /v1/embeddings

claims:
  static:
    key: ak_tiered_model_exec
    tier: enterprise
    exp_hours: 24

metadata:
  # GES Namespace configurations - namespaces and their group claims
  ges_namespaces:
    # Namespace 1: AI Models Access
    "ai-models-namespace":
      description: "Controls access to AI models"
      group_claims:
        "gpt-4-access":
          models: ["gpt-4", "gpt-4-turbo", "gpt-4-vision"]
          max_tokens: 8192
          rate_limit: 100
        "gpt-3-access":
          models: ["gpt-3.5-turbo", "gpt-3.5-turbo-16k"]
          max_tokens: 4096
          rate_limit: 200
        "claude-access":
          models: ["claude-2", "claude-instant"]
          max_tokens: 4096
          rate_limit: 150

    # Namespace 2: Inference Capabilities
    "inference-namespace":
      description: "Controls inference capabilities"
      group_claims:
        "batch-inference":
          batch_processing: true
          max_batch_size: 1000
          async_operations: true
        "real-time-inference":
          real_time: true
          max_concurrent: 10
          low_latency: true

    # Namespace 3: RAG Features
    "rag-namespace":
      description: "Controls RAG capabilities"
      group_claims:
        "vector-search":
          vector_search: true
          max_vectors: 100000
          similarity_threshold: 0.8
        "document-processing":
          document_processing: true
          max_file_size: 100MB
          supported_formats: ["pdf", "docx", "txt"]
        "knowledge-base-admin":
          kb_admin: true
          can_create_kb: true
          can_delete_kb: true

    # Namespace 4: Experimental Features
    "experimental-namespace":
      description: "Controls access to experimental features"
      group_claims:
        "beta-features":
          experimental: true
          beta_features: ["voice_synthesis", "video_analysis"]
          early_access: true

  # GES Access Validation
  ges_validation:
    required_namespaces:
      - "ai-models-namespace"
      - "inference-namespace"
    minimum_groups_required: 1

  # Default claims if no GES groups match
  default_claims:
    models: ["gpt-3.5-turbo"]
    max_tokens: 2048
    rate_limit: 50
    tier: "basic"
